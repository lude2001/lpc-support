# 更新日志

所有LPC Support扩展的显著变更都将记录在此文件中。

## [0.1.6] - 2025-09-04

### 新增
- **Include文件跳转功能**: 支持点击include语句中的文件名直接跳转到对应文件
  - 支持 `#include <command.h>` 全局头文件路径跳转
  - 支持 `include "relative/path.h"` 相对路径和项目绝对路径跳转
  - 智能文件名识别，点击引号或尖括号区域内的任意位置都可跳转
  - 自动添加 `.h` 扩展名（如果未指定）

### 改进
- **配置路径支持项目相对路径**: 所有路径配置现在支持相对于项目根目录的路径
  - `lpc.includePath` 配置支持项目相对路径（如 `"include"`, `"path/to/include"`）
  - `lpc.simulatedEfunsPath` 配置支持项目相对路径（如 `"lib"`, `"src/simul_efun"`）
  - 向后兼容现有的绝对路径配置
  - 便于团队协作和项目配置管理

### 修复
- **全局include路径解析**: 修复了使用 `<>` 包含全局头文件时无法正确跳转的问题
- **宏定义目录路径处理**: 改进了宏定义目录的路径解析逻辑，确保项目相对路径正确处理
- **模拟函数库路径处理**: 修复了模拟函数库目录配置的路径解析问题

## [0.1.5] - 2025-09-03

### 修复
- **支持局部class变量声明**: 修复了LPC语法解析器，现在支持在函数体内使用 `class item ca;` 这样的局部变量声明语法
  - 在 `typeSpec` 规则中添加了 `KW_CLASS Identifier` 语法支持，允许 `class item` 类型声明
  - 在 `castType` 规则中同样添加了相应支持，确保类型转换的一致性
  - 修复了之前无法在函数内部使用自定义class类型声明局部变量的问题

- **修复new表达式解析**: 修复了 `new` 表达式的语法解析问题
  - 现在支持 `new("/d/fuben/"+name+"/"+files[i])` 这样的字符串路径表达式
  - 在 `newExpression` 规则中添加了对 `expression` 的支持，不再仅限于 `typeSpec`
  - 解决了使用字符串路径创建对象时的语法错误误报

## [0.1.4] - 2025-01-15

### 改进
- **跨文件函数跳转功能大幅增强**
  - 增强了对 `.h` 头文件中函数原型声明的解析支持
  - 改进了 `include` 语句的文件路径解析，支持相对路径和绝对路径
  - 添加了头文件函数索引和缓存机制，显著提升查找性能
  - 支持从 `.c` 文件中的函数调用直接跳转到 `.h` 文件中的函数声明
  - 支持 C 风格的 `#include` 和 LPC 风格的 `include` 语句
  - 添加了文件变化监听，自动清除相关缓存确保数据一致性

### 修复
- 修复了跨文件函数定义查找的稳定性问题
- 优化了内存使用，避免重复解析同一头文件

## [0.1.3] - 2025-01-15

### 新增
- **include语法支持**: 添加了对LPC语言include语句的完整语法支持
  - 在词法分析器中添加了`INCLUDE`关键字定义
  - 在语法分析器中添加了`includeStatement`规则
  - 支持`include "filename";`和`include expression;`语法
  - 与现有的`inherit`语法保持一致的语法结构
  - 提升了LPC语言特性的完整性和兼容性

## [0.1.2] - 2025-08-26
### 新增
- **错误信息复制功能**：在错误树视图中，现在可以右键点击错误项并选择"复制错误信息"来复制完整的错误详情到剪贴板
- 错误树项现在支持右键菜单操作
- 复制的错误信息包含文件路径、行号、错误类型和详细错误信息

### 改进
- 提升了错误信息的可访问性和便于分享
- 优化了错误处理工作流程

## [0.1.1] - 2025-08-25
### 移除
- **移除函数参数使用情况检查功能**：取消对函数定义中参数变量使用情况的强制检查。在函数重载等业务场景下，未使用的参数是合理的，因此移除了相关的警告提示。
- 移除了 `lpc.enableUnusedParameterCheck` 配置选项
- 移除了 `UnusedParameterCollector` 诊断收集器

### 改进
- 减少了不必要的代码警告，提升了开发体验
- 优化了诊断系统的性能

## [0.0.4] - 2025-05-31
### 新增
- 模拟函数库的文档支持扩充。
- 深度继承链支持。
- 在编辑框右上角新增文档速览，可以根据继承链深度检索对象的方法文档。（如果有编写）
- 快捷键ctrl + f5快捷键编译代码。


### 修复
- 格式化代码功能修复了一些功能，目前可以在代码结构不太复杂的情况下格式化lpc代码。
- 扩展名编写要求的一些误报情况修复。

### 改进
- 改进了变量位置的识别。
- 改进了函数跳转功能。
- 语法高亮进行了更细致的分类。
- 识别未使用的变量目前会更严格，包括迭代变量。

## [0.0.3] - 2025-02-25

### 新增
- 增强了代码补全功能，支持更多LPC特性
- 改进了服务器管理界面
- 【变量】现在可以支持上下文提示作用域范围内的变量
- 【函数】现在可以在上下文中提示上下文的函数，以及继承文件的函数。
- 【文档】上下文的javadoc函数文档可以被智能提示，找到继承链最后一个文件为止。

### 修复
- 修复了宏定义处理逻辑中一些的问题
- 修复了代码诊断中的一些误报问题
- 修复了编译文件时的路径处理一些问题

### 改进
- 改进了代码诊断功能，提高了准确性
- 优化了宏定义处理逻辑，提高了性能
- 改进了服务器管理界面的用户体验

## [0.0.2] - 2025-01-25

### 初始版本
- 实现基本功能：语法高亮、代码补全、诊断及服务器管理
- 初步支持宏定义功能
- 添加 Efun 文档支持
- 实现代码快速修复功能